#include "mainpage.h"
#include "ui_mainpage.h"
#include "controller/monitorcontroller.h"
#include "controller/settings.h"
//#include "controller/sessions/session.h"
#include "sensor/isensor.h"
#include "gui/gui_funcs.h"
#include "gui/mainmenu.h"
#include "plots/markitem.h"
#include "plots/labelmarkitem.h"
#include "controller/labels/label.h"
#include "global_functions.h"
#include "plots/intervalplot.h"
#include "sensor/impl/fileimitsensor.h"


#include <QTimer>
#include <QDateTime>
#include <QPushButton>
#include <QDebug>
#include <QProcess>
#include <QStringList>

QString tempArrTime = "0 20 40 60 80 100 120 140 160 180 200 220 240 260 280 300 320 340 360 380 400 420 440 460 480 500 520 540 560 580 600 620 640 660 680 700 720 740 760 780 800 820 840 860 880 900 920 940 960 980 1000 1020 1040 1060 1080 1100 1120 1140 1160 1180 1200 1220 1240 1260 1280 1300 1320 1340 1360 1380 1400 1420 1440 1460 1480 1500 1520 1540 1560 1580 1600 1620 1640 1660 1680 1700 1720 1740 1760 1780 1800 1820 1840 1860 1880 1900 1920 1940 1960 1980 2000 2020 2040 2060 2080 2100 2120 2140 2160 2180 2200 2220 2240 2260 2280 2300 2320 2340 2360 2380 2400 2420 2440 2460 2480 2500 2520 2540 2560 2580 2600 2620 2640 2660 2680 2700 2720 2740 2760 2780 2800 2820 2840 2860 2880 2900 2920 2940 2960 2980 3000 3020 3040 3060 3080 3100 3120 3140 3160 3180 3200 3220 3240 3260 3280 3300 3320 3340 3360 3380 3400 3420 3440 3460 3480 3500 3520 3540 3560 3580 3600 3620 3640 3660 3680 3700 3720 3740 3760 3780 3800 3820 3840 3860 3880 3900 3920 3940 3960 3980 4000 4020 4040 4060 4080 4100 4120 4140 4160 4180 4200 4220 4240 4260 4280 4300 4320 4340 4360 4380 4400 4420 4440 4460 4480 4500 4520 4540 4560 4580 4600 4620 4640 4660 4680 4700 4720 4740 4760 4780 4800 4820 4840 4860 4880 4900 4920 4940 4960 4980 5000 5020 5040 5060 5080 5100 5120 5140 5160 5180 5200 5220 5240 5260 5280 5300 5320 5340 5360 5380 5400 5420 5440 5460 5480 5500 5520 5540 5560 5580 5600 5620 5640 5660 5680 5700 5720 5740 5760 5780 5800 5820 5840 5860 5880 5900 5920 5940 5960 5980 6000 6020 6040 6060 6080 6100 6120 6140 6160 6180 6200 6220 6240 6260 6280 6300 6320 6340 6360 6380 6400 6420 6440 6460 6480 6500 6520 6540 6560 6580 6600 6620 6640 6660 6680 6700 6720 6740 6760 6780 6800 6820 6840 6860 6880 6900 6920 6940 6960 6980 7000 7020 7040 7060 7080 7100 7120 7140 7160 7180 7200 7220 7240 7260 7280 7300 7320 7340 7360 7380 7400 7420 7440 7460 7480 7500 7520 7540 7560 7580 7600 7620 7640 7660 7680 7700 7720 7740 7760 7780 7800 7820 7840 7860 7880 7900 7920 7940 7960 7980 8000 8020 8040 8060 8080 8100 8120 8140 8160 8180 8200 8220 8240 8260 8280 8300 8320 8340 8360 8380 8400 8420 8440 8460 8480 8500 8520 8540 8560 8580 8600 8620 8640 8660 8680 8700 8720 8740 8760 8780 8800 8820 8840 8860 8880 8900 8920 8940 8960 8980 9000 9020 9040 9060 9080 9100 9120 9140 9160 9180 9200 9220 9240 9260 9280 9300 9320 9340 9360 9380 9400 9420 9440 9460 9480 9500 9520 9540 9560 9580 9600 9620 9640 9660 9680 9700 9720 9740 9760 9780 9800 9820 9840 9860 9880 9900 9920 9940 9960 9980 10000 10020 10040 10060 10080 10100 10120 10140 10160 10180 10200 10220 10240 10260 10280 10300 10320 10340 10360 10380 10400 10420 10440 10460 10480 10500 10520 10540 10560 10580 10600 10620 10640 10660 10680 10700 10720 10740 10760 10780 10800 10820 10840 10860 10880 10900 10920 10940 10960 10980 11000 11020 11040 11060 11080 11100 11120 11140 11160 11180 11200 11220 11240 11260 11280 11300 11320 11340 11360 11380 11400 11420 11440 11460 11480 11500 11520 11540 11560 11580 11600 11620 11640 11660 11680 11700 11720 11740 11760 11780 11800 11820 11840 11860 11880 11900 11920 11940 11960 11980 12000 12020 12040 12060 12080 12100 12120 12140 12160 12180 12200 12220 12240 12260 12280 12300 12320 12340 12360 12380 12400 12420 12440 12460 12480 12500 12520 12540 12560 12580 12600 12620 12640 12660 12680 12700 12720 12740 12760 12780 12800 12820 12840 12860 12880 12900 12920 12940 12960 12980 13000 13020 13040 13060 13080 13100 13120 13140 13160 13180 13200 13220 13240 13260 13280 13300 13320 13340 13360 13380 13400 13420 13440 13460 13480 13500 13520 13540 13560 13580 13600 13620 13640 13660 13680 13700 13720 13740 13760 13780 13800 13820 13840 13860 13880 13900 13920 13940 13960 13980 14000 14020 14040 14060 14080 14100 14120 14140 14160 14180 14200 14220 14240 14260 14280 14300 14320 14340 14360 14380 14400 14420 14440 14460 14480 14500 14520 14540 14560 14580 14600 14620 14640 14660 14680 14700 14720 14740 14760 14780 14800 14820 14840 14860 14880 14900 14920 14940 14960 14980 15000 15020 15040 15060 15080 15100 15120 15140 15160 15180 15200 15220 15240 15260 15280 15300 15320 15340 15360 15380 15400 15420 15440 15460 15480 15500 15520 15540 15560 15580 15600 15620 15640 15660 15680 15700 15720 15740 15760 15780 15800 15820 15840 15860 15880 15900 15920 15940 15960 15980 16000 16020 16040 16060 16080 16100 16120 16140 16160 16180 16200 16220 16240 16260 16280 16300 16320 16340 16360 16380 16400 16420 16440 16460 16480 16500 16520 16540 16560 16580 16600 16620 16640 16660 16680 16700 16720 16740 16760 16780 16800 16820 16840 16860 16880 16900 16920 16940 16960 16980 17000 17020 17040 17060 17080 17100 17120 17140 17160 17180 17200 17220 17240 17260 17280 17300 17320 17340 17360 17380 17400 17420 17440 17460 17480 17500 17520 17540 17560 17580 17600 17620 17640 17660 17680 17700 17720 17740 17760 17780 17800 17820 17840 17860 17880 17900 17920 17940 17960 17980 18000 18020 18040 18060 18080 18100 18120 18140 18160 18180 18200 18220 18240 18260 18280 18300 18320 18340 18360 18380 18400 18420 18440 18460 18480 18500 18520 18540 18560 18580 18600 18620 18640 18660 18680 18700 18720 18740 18760 18780 18800 18820 18840 18860 18880 18900 18920 18940 18960 18980 19000 19020 19040 19060 19080 19100 19120 19140 19160 19180 19200 19220 19240 19260 19280 19300 19320 19340 19360 19380 19400 19420 19440 19460 19480 19500 19520 19540 19560 19580 19600 19620 19640 19660 19680 19700 19720 19740 19760 19780 19800 19820 19840 19860 19880 19900 19920 19940 19960 19980 20000 20020 20040 20060 20080 20100 20120 20140 20160 20180 20200 20220 20240 20260 20280 20300 20320 20340 20360 20380 20400 20420 20440 20460 20480 20500 20520 20540 20560 20580 20600 20620 20640 20660 20680 20700 20720 20740 20760 20780 20800 20820 20840 20860 20880 20900 20920 20940 20960 20980 21000 21020 21040 21060 21080 21100 21120 21140 21160 21180 21200 21220 21240 21260 21280 21300 21320 21340 21360 21380 21400 21420 21440 21460 21480 21500 21520 21540 21560 21580 21600 21620 21640 21660 21680 21700 21720 21740 21760 21780 21800 21820 21840 21860 21880 21900 21920 21940 21960 21980 22000 22020 22040 22060 22080 22100 22120 22140 22160 22180 22200 22220 22240 22260 22280 22300 22320 22340 22360 22380 22400 22420 22440 22460 22480 22500 22520 22540 22560 22580 22600 22620 22640 22660 22680 22700 22720 22740 22760 22780 22800 22820 22840 22860 22880 22900 22920 22940 22960 22980 23000 23020 23040 23060 23080 23100 23120 23140 23160 23180 23200 23220 23240 23260 23280 23300 23320 23340 23360 23380 23400 23420 23440 23460 23480 23500 23520 23540 23560 23580 23600 23620 23640 23660 23680 23700 23720 23740 23760 23780 23800 23820 23840 23860 23880 23900 23920 23940 23960 23980 24000 24020 24040 24060 24080 24100 24120 24140 24160 24180 24200 24220 24240 24260 24280 24300 24320 24340 24360 24380 24400 24420 24440 24460 24480 24500 24520 24540 24560 24580 24600 24620 24640 24660 24680 24700 24720 24740 24760 24780 24800 24820 24840 24860 24880 24900 24920 24940 24960 24980 25000 25020 25040 25060 25080 25100 25120 25140 25160 25180 25200 25220 25240 25260 25280 25300 25320 25340 25360 25380 25400 25420 25440 25460 25480 25500 25520 25540 25560 25580 25600 25620 25640 25660 25680 25700 25720 25740 25760 25780 25800 25820 25840 25860 25880 25900 25920 25940 25960 25980 26000 26020 26040 26060 26080 26100 26120 26140 26160 26180 26200 26220 26240 26260 26280 26300 26320 26340 26360 26380 26400 26420 26440 26460 26480 26500 26520 26540 26560 26580 26600 26620 26640 26660 26680 26700 26720 26740 26760 26780 26800 26820 26840 26860 26880 26900 26920 26940 26960 26980 27000 27020 27040 27060 27080 27100 27120 27140 27160 27180 27200 27220 27240 27260 27280 27300 27320 27340 27360 27380 27400 27420 27440 27460 27480 27500 27520 27540 27560 27580 27600 27620 27640 27660 27680 27700 27720 27740 27760 27780 27800 27820 27840 27860 27880 27900 27920 27940 27960 27980 28000 28020 28040 28060 28080 28100 28120 28140 28160 28180 28200 28220 28240 28260 28280 28300 28320 28340 28360 28380 28400 28420 28440 28460 28480 28500 28520 28540 28560 28580 28600 28620 28640 28660 28680 28700 28720 28740 28760 28780 28800 28820 28840 28860 28880 28900 28920 28940 28960 28980 29000 29020 29040 29060 29080 29100 29120 29140 29160 29180 29200 29220 29240 29260 29280 29300 29320 29340 29360 29380 29400 29420 29440 29460 29480 29500 29520 29540 29560 29580 29600 29620 29640 29660 29680 29700 29720 29740 29760 29780 29800 29820 29840 29860 29880 29900 29920 29940 29960 29980 30000 30020 30040 30060 30080 30100 30120 30140 30160 30180 30200 30220 30240 30260 30280 30300 30320 30340 30360 30380 30400 30420 30440 30460 30480 30500 30520 30540 30560 30580 30600 30620 30640 30660 30680 30700 30720 30740 30760 30780 30800 30820 30840 30860 30880 30900 30920 30940 30960 30980 31000 31020 31040 31060 31080 31100 31120 31140 31160 31180 31200 31220 31240 31260 31280 31300 31320 31340 31360 31380 31400 31420 31440 31460 31480 31500 31520 31540 31560 31580 31600 31620 31640 31660 31680 31700 31720 31740 31760 31780 31800 31820 31840 31860 31880 31900 31920 31940 31960 31980 32000 32020 32040 32060 32080 32100 32120 32140 32160 32180 32200 32220 32240 32260 32280 32300 32320 32340 32360 32380 32400 32420 32440 32460 32480 32500 32520 32540 32560 32580 32600 32620 32640 32660 32680 32700 32720 32740 32760 32780 32800 32820 32840 32860 32880 32900 32920 32940 32960 32980 33000 33020 33040 33060 33080 33100 33120 33140 33160 33180 33200 33220 33240 33260 33280 33300 33320 33340 33360 33380 33400 33420 33440 33460 33480 33500 33520 33540 33560 33580 33600 33620 33640 33660 33680 33700 33720 33740 33760 33780 33800 33820 33840 33860 33880 33900 33920 33940 33960 33980 34000 34020 34040 34060 34080 34100 34120 34140 34160 34180 34200 34220 34240 34260 34280 34300 34320 34340 34360 34380 34400 34420 34440 34460 34480 34500 34520 34540 34560 34580 34600 34620 34640 34660 34680 34700 34720 34740 34760 34780 34800 34820 34840 34860 34880 34900 34920 34940 34960 34980 35000 35020 35040 35060 35080 35100 35120 35140 35160 35180 35200 35220 35240 35260 35280 35300 35320 35340 35360 35380 35400 35420 35440 35460 35480 35500 35520 35540 35560 35580 35600 35620 35640 35660 35680 35700 35720 35740 35760 35780 35800 35820 35840 35860 35880 35900 35920 35940 35960 35980 36000 36020 36040 36060 36080 36100 36120 36140 36160 36180 36200 36220 36240 36260 36280 36300 36320 36340 36360 36380 36400 36420 36440 36460 36480 36500 36520 36540 36560 36580 36600 36620 36640 36660 36680 36700 36720 36740 36760 36780 36800 36820 36840 36860 36880 36900 36920 36940 36960 36980 37000 37020 37040 37060 37080 37100 37120 37140 37160 37180 37200 37220 37240 37260 37280 37300 37320 37340 37360 37380 37400 37420 37440 37460 37480 37500 37520 37540 37560 37580 37600 37620 37640 37660 37680 37700 37720 37740 37760 37780 37800 37820 37840 37860 37880 37900 37920 37940 37960 37980 38000 38020 38040 38060 38080 38100 38120 38140 38160 38180 38200 38220 38240 38260 38280 38300 38320 38340 38360 38380 38400 38420 38440 38460 38480 38500 38520 38540 38560 38580 38600 38620 38640 38660 38680 38700 38720 38740 38760 38780 38800 38820 38840 38860 38880 38900 38920 38940 38960 38980 39000 39020 39040 39060 39080 39100 39120 39140 39160 39180 39200 39220 39240 39260 39280 39300 39320 39340 39360 39380 39400 39420 39440 39460 39480 39500 39520 39540 39560 39580 39600 39620 39640 39660 39680 39700 39720 39740 39760 39780 39800 39820 39840 39860 39880 39900 39920 39940 39960 39980 40000 40020 40040 40060 40080 40100 40120 40140 40160 40180 40200 40220 40240 40260 40280 40300 40320 40340 40360 40380 40400 40420 40440 40460 40480 40500 40520 40540 40560 40580 40600 40620 40640 40660 40680 40700 40720 40740 40760 40780 40800 40820 40840 40860 40880 40900 40920 40940 40960 40980 41000 41020 41040 41060 41080 41100 41120 41140 41160 41180 41200 41220 41240 41260 41280 41300 41320 41340 41360 41380 41400 41420 41440 41460 41480 41500 41520 41540 41560 41580 41600 41620 41640 41660 41680 41700 41720 41740 41760 41780 41800 41820 41840 41860 41880 41900 41920 41940 41960 41980 42000 42020 42040 42060 42080 42100 42120 42140 42160 42180 42200 42220 42240 42260 42280 42300 42320 42340 42360 42380 42400 42420 42440 42460 42480 42500 42520 42540 42560 42580 42600 42620 42640 42660 42680 42700 42720 42740 42760 42780 42800 42820 42840 42860 42880 42900 42920 42940 42960 42980 43000 43020 43040 43060 43080 43100 43120 43140 43160 43180 43200 43220 43240 43260 43280 43300 43320 43340 43360 43380 43400 43420 43440 43460 43480 43500 43520 43540 43560 43580 43600 43620 43640 43660 43680 43700 43720 43740 43760 43780 43800 43820 43840 43860 43880 43900 43920 43940 43960 43980 44000 44020 44040 44060 44080 44100 44120 44140 44160 44180 44200 44220 44240 44260 44280 44300 44320 44340 44360 44380 44400 44420 44440 44460 44480 44500 44520 44540 44560 44580 44600 44620 44640 44660 44680 44700 44720 44740 44760 44780 44800 44820 44840 44860 44880 44900 44920 44940 44960 44980 45000 45020 45040 45060 45080 45100 45120 45140 45160 45180 45200 45220 45240 45260 45280 45300 45320 45340 45360 45380 45400 45420 45440 45460 45480 45500 45520 45540 45560 45580 45600 45620 45640 45660 45680 45700 45720 45740 45760 45780 45800 45820 45840 45860 45880 45900 45920 45940 45960 45980 46000 46020 46040 46060 46080 46100 46120 46140 46160 46180 46200 46220 46240 46260 46280 46300 46320 46340 46360 46380 46400 46420 46440 46460 46480 46500 46520 46540 46560 46580 46600 46620 46640 46660 46680 46700 46720 46740 46760 46780 46800 46820 46840 46860 46880 46900 46920 46940 46960 46980 47000 47020 47040 47060 47080 47100 47120 47140 47160 47180 47200 47220 47240 47260 47280 47300 47320 47340 47360 47380 47400 47420 47440 47460 47480 47500 47520 47540 47560 47580 47600 47620 47640 47660 47680 47700 47720 47740 47760 47780 47800 47820 47840 47860 47880 47900 47920 47940 47960 47980 48000 48020 48040 48060 48080 48100 48120 48140 48160 48180 48200 48220 48240 48260 48280 48300 48320 48340 48360 48380 48400 48420 48440 48460 48480 48500 48520 48540 48560 48580 48600 48620 48640 48660 48680 48700 48720 48740 48760 48780 48800 48820 48840 48860 48880 48900 48920 48940 48960 48980 49000 49020 49040 49060 49080 49100 49120 49140 49160 49180 49200 49220 49240 49260 49280 49300 49320 49340 49360 49380 49400 49420 49440 49460 49480 49500 49520 49540 49560 49580 49600 49620 49640 49660 49680 49700 49720 49740 49760 49780 49800 49820 49840 49860 49880 49900 49920 49940 49960 49980 50000 50020 50040 50060 50080 50100 50120 50140 50160 50180 50200 50220 50240 50260 50280 50300 50320 50340 50360 50380 50400 50420 50440 50460 50480 50500 50520 50540 50560 50580 50600 50620 50640 50660 50680 50700 50720 50740 50760 50780 50800 50820 50840 50860 50880 50900 50920 50940 50960 50980 51000 51020 51040 51060 51080 51100 51120 51140 51160 51180 51200 51220 51240 51260 51280 51300 51320 51340 51360 51380 51400 51420 51440 51460 51480 51500 51520 51540 51560 51580 51600 51620 51640 51660 51680 51700 51720 51740 51760 51780 51800 51820 51840 51860 51880 51900 51920 51940 51960 51980 52000 52020 52040 52060 52080 52100 52120 52140 52160 52180 52200 52220 52240 52260 52280 52300 52320 52340 52360 52380 52400 52420 52440 52460 52480 52500 52520 52540 52560 52580 52600 52620 52640 52660 52680 52700 52720 52740 52760 52780 52800 52820 52840 52860 52880 52900 52920 52940 52960 52980 53000 53020 53040 53060 53080 53100 53120 53140 53160 53180 53200 53220 53240 53260 53280 53300 53320 53340 53360 53380 53400 53420 53440 53460 53480 53500 53520 53540 53560 53580 53600 53620 53640 53660 53680 53700 53720 53740 53760 53780 53800 53820 53840 53860 53880 53900 53920 53940 53960 53980 54000 54020 54040 54060 54080 54100 54120 54140 54160 54180 54200 54220 54240 54260 54280 54300 54320 54340 54360 54380 54400 54420 54440 54460 54480 54500 54520 54540 54560 54580 54600 54620 54640 54660 54680 54700 54720 54740 54760 54780 54800 54820 54840 54860 54880 54900 54920 54940 54960 54980 55000 55020 55040 55060 55080 55100 55120 55140 55160 55180 55200 55220 55240 55260 55280 55300 55320 55340 55360 55380 55400 55420 55440 55460 55480 55500 55520 55540 55560 55580 55600 55620 55640 55660 55680 55700 55720 55740 55760 55780 55800 55820 55840 55860 55880 55900 55920 55940 55960 55980 56000 56020 56040 56060 56080 56100 56120 56140 56160 56180 56200 56220 56240 56260 56280 56300 56320 56340 56360 56380 56400 56420 56440 56460 56480 56500 56520 56540 56560 56580 56600 56620 56640 56660 56680 56700 56720 56740 56760 56780 56800 56820 56840 56860 56880 56900 56920 56940 56960 56980 57000 57020 57040 57060 57080 57100 57120 57140 57160 57180 57200 57220 57240 57260 57280 57300 57320 57340 57360 57380 57400 57420 57440 57460 57480 57500 57520 57540 57560 57580 57600 57620 57640 57660 57680 57700 57720 57740 57760 57780 57800 57820 57840 57860 57880 57900 57920 57940 57960 57980 58000 58020 58040 58060 58080 58100 58120 58140 58160 58180 58200 58220 58240 58260 58280 58300 58320 58340 58360 58380 58400 58420 58440 58460 58480 58500 58520 58540 58560 58580 58600 58620 58640 58660 58680 58700 58720 58740 58760 58780 58800 58820 58840 58860 58880 58900 58920 58940 58960 58980 59000 59020 59040 59060 59080 59100 59120 59140 59160 59180 59200 59220 59240 59260 59280 59300 59320 59340 59360 59380 59400 59420 59440 59460 59480 59500 59520 59540 59560 59580 59600 59620 59640 59660 59680 59700 59720 59740 59760 59780 59800 59820 59840 59860 59880 59900 59920 59940 59960 59980";
QString tempArrPressure = "20.272 22.013 22.951 22.549 23.048 22.829 22.537 23.072 22.671 22.366 22.366 21.843 22.062 21.563 21.514 20.857 20.394 19.639 18.775 18.178 17.715 17.058 16.145 15.731 15.207 14.647 14.318 13.637 13.296 12.979 13.722 15.682 17.898 20.345 21.989 22.926 22.695 22.975 22.865 22.963 23.072 23.024 22.549 22.452 22.585 21.965 21.758 21.587 20.942 20.345 19.676 18.896 18.701 17.618 17.082 16.206 15.658 15.231 14.708 13.965 13.868 13.235 12.869 13.113 14.391 17.411 19.164 20.942 22.525 22.926 22.926 22.598 22.549 23.146 23.06 22.975 22.525 22.062 22.111 21.745 21.197 21.003 20.613 19.152 19.115 18.555 17.752 17.18 16.546 15.865 15.512 14.708 14.343 14.099 13.77 13.174 13.247 14.245 16.826 19.262 21.222 22.269 23.109 23.45 22.914 23.243 23.389 23.572 23.158 23.401 23.06 22.926 22.585 22.5 22.403 21.928 20.771 20.491 19.554 19.152 18.495 17.667 17.131 17.228 16.4 15.645 15.548 14.708 14.83 14.233 15.402 17.301 19.968 22.366 23.961 24.594 24.558 24.509 24.838 24.935 24.643 25.021 24.972 24.375 24.558 23.657 23.511 22.999 22.074 21.989 21.088 20.443 19.712 19.018 18.47 17.947 17.082 16.766 16.303 15.56 15.158 14.184 13.673 14.598 16.619 19.164 21.356 22.963 23.961 24.059 24.339 24.473 24.363 24.874 24.85 24.424 23.986 23.486 23.608 22.963 22.537 22.062 21.429 21.149 20.065 19.493 19.079 18.117 17.204 17.107 16.339 15.792 15.305 14.769 14.391 13.478 14.184 16.108 18.397 20.905 22.403 23.559 23.998 23.852 24.132 23.961 23.864 24.047 23.9 23.389 23.121 22.926 22.622 22.403 21.977 21.149 20.248 20.041 19.152 18.641 18.032 17.094 16.68 16.145 15.609 15.305 14.72 14.245 13.758 14.087 15.889 18.068 20.43 22.951 23.426 23.888 23.864 23.608 24.083 23.998 23.888 23.986 23.486 22.865 22.598 22.208 22.549 21.684 21.039 20.248 19.785 19.213 18.166 17.959 17.338 16.619 16.169 15.706 15.073 14.44 14.099 13.283 13.758 15.986 18.348 21.051 22.452 23.572 23.913 23.888 23.73 23.864 23.998 23.961 23.84 23.633 22.914 22.963 22.5 22.452 21.928 20.613 20.418 20.041 19.006 18.348 17.606 17.058 16.778 15.755 15.487 14.671 14.099 13.673 13.563 15.597 18.141 19.968 22.318 23.292 24.01 23.608 23.426 23.815 23.998 23.937 23.913 23.474 23.474 23.024 22.439 21.977 21.563 20.978 20.199 19.627 18.848 18.227 17.679 17.058 16.449 15.645 15.317 14.598 13.868 13.758 13.637 14.294 16.425 19.128 21.283 22.525 23.389 24.473 23.949 23.864 23.986 23.986 24.46 23.9 23.535 23.486 22.926 23.024 22.549 21.965 21.648 20.601 19.907 19.298 18.446 18.214 17.703 17.058 16.339 16.023 15.645 14.793 14.72 14.647 14.939 17.155 19.602 22.269 24.083 24.753 24.85 25.081 24.947 24.972 25.167 25.361 25.021 24.509 24.375 24.12 23.523 23.109 22.573 21.758 21.149 20.467 19.663 19.03 17.861 18.032 17.046 16.291 15.548 15.499 14.793 14.282 14.148 16.145 18.421 20.747 22.525 23.888 24.29 24.497 24.168 24.168 24.46 24.838 24.424 23.937 23.474 23.072 22.951 22.622 22.111 21.368 20.321 20.053 19.602 18.726 17.679 17.277 16.96 16.145 15.731 15.463 14.757 14.282 14.16 16.668 19.03 21.319 22.963 23.852 23.791 23.986 23.913 24.424 23.888 23.961 23.511 23.012 22.963 22.403 22.573 22.038 21.453 21.1 20.041 19.578 18.616 17.606 17.667 16.68 16.291 15.743 14.842 14.611 14.294 13.624 13.734 15.085 17.374 19.834 21.758 22.926 23.438 23.377 23.572 23.559 23.389 23.681 23.523 22.695 23.024 22.342 22.598 22.135 21.477 21.185 20.382 19.505 18.653 17.74 17.618 16.693 16.291 16.266 15.378 14.708 14.282 13.685 13.162 12.821 14.136 16.717 18.969 20.942 22.853 23.389 23.572 22.926 22.878 23.34 23.426 23.486 23.024 22.415 22.549 22.318 21.855 21.551 20.942 20.54 19.663 19.018 18.227 17.654 17.082 16.254 15.682 15.158 14.72 14.16 13.953 13.563 13.356 14.611 16.875 19.31 21.124 22.452 23.097 22.914 23.012 23.012 22.914 23.523 23.353 22.768 22.5 22.013 22.135 22.074 21.453 20.601 20.041 19.602 18.653 18.007 17.667 16.619 16.084 15.706 15.073 14.477 14.282 13.612 13.332 14.245 16.035 18.616 20.796 22.768 23.535 23.401 23.584 23.377 23.937 24.01 23.864 23.633 23.486 22.598 23.06 22.878 22.525 22.038 21.465 20.65 19.554 18.75 18.568 18.044 17.63 17.009 16.169 16.084 15.694 14.878 14.708 14.696 16.4 18.701 21.368 23.572 24.874 25.398 25.41 25.203 25.435 25.459 25.398 25.556 25.021 24.12 24.448 23.852 23.231 23.024 22.403 21.587 20.93 19.931 19.383 18.519 18.19 17.606 17.046 16.546 15.585 15.073 15.134 15.585 18.214 20.577 22.452 24.278 24.838 25.349 24.923 24.874 25.459 25.349 25.203 24.935 24.339 24.047 23.961 23.158 22.975 22.5 21.429 20.99 20.284 19.59 19.128 18.068 17.752 17.094 16.437 15.755 15.231 15.56 16.9 19.115 21.514 23.292 24.692 24.996 24.838 25.033 24.85 24.874 24.996 24.753 24.095 23.986 23.9 23.231 22.914 22.366 22.074 20.978 20.43 19.505 18.982 18.604 17.569 17.046 16.668 16.084 15.743 15.256 15.925 18.044 20.418 22.585 24.29 24.874 24.497 24.57 24.874 25.069 25.508 24.887 24.546 24.314 24.034 23.766 23.353 22.999 22.391 21.684 20.905 19.907 19.688 19.115 18.032 17.715 16.96 16.254 15.743 15.633 15.938 17.606 20.004 22.5 24.29 25.483 25.154 25.069 25.495 25.361 25.678 25.495 24.874 24.448 24.168 23.681 23.584 22.999 22.573 22.074 21.051 20.564 19.274 19.067 18.641 17.813 17.18 16.668 16.218 15.694 15.158 15.645 17.703 20.333 22.853 24.473 25.349 25.495 25.203 25.361 25.447 25.301 25.605 24.874 24.424 23.815 23.426 23.523 22.999 22.439 21.843 20.93 20.248 19.249 18.689 18.519 17.569 17.046 16.291 15.877 15.317 14.757 15.158 17.886 20.211 22.293 23.986 24.899 25.313 24.887 25.203 25.483 25.447 25.836 24.838 24.546 24.46 24.047 23.949 23.401 22.719 22.22 21.636 20.577 20.138 19.395 18.568 18.227 17.533 17.107 16.729 16.169 16.254 17.46 20.187 22.488 24.412 25.97 26.774 26.335 26.25 26.214 26.445 26.896 26.494 26.567 25.861 25.374 24.972 24.448 23.986 23.474 22.488 22.074 21.088 20.613 19.481 19.103 18.543 17.654 17.046 16.291 15.645 16.534 18.75 21.124 23.474 25.325 25.909 26.445 26.384 26.469 26.372 26.908 26.92 26.141 25.435 25.459 24.899 24.509 23.791 23.438 22.671 21.843 21.197 20.577 20.041 18.848 18.616 17.581 17.204 16.729 16.254 16.619 18.373 20.82 22.963 24.546 25.435 25.556 25.982 25.873 25.836 25.885 25.836 25.495 24.826 24.412 24.473 24.034 23.45 23.097 22.038 21.453 20.771 20.102 19.602 18.75 18.068 17.667 16.863 16.534 15.365 15.645 17.289 19.785 22.013 23.961 24.753 25.532 25.495 25.398 25.556 25.788 25.69 25.447 24.874 24.643 23.998 23.584 23.608 22.926 22.573 21.563 20.93 19.907 19.115 19.079 18.141 17.374 17.18 16.644 16.108 15.28 15.597 17.35 20.089 22.488 24.339 24.972 25.325 25.508 25.508 25.349 25.824 25.629 25.033 24.972 24.363 23.949 23.681 23.559 22.999 21.94 21.502 20.54 20.041 19.164 18.543 18.166 17.301 16.68 16.193 15.597 15.207 15.694 17.569 20.065 22.744 24.18 25.435 25.41 25.118 25.459 25.349 25.532 25.483 24.558 24.424 23.888 23.913 23.511 23.024 22.488 21.636 20.844 20.138 19.505 19.006 18.288 17.801 17.24 16.254 16.035 15.365 14.842 15.231 16.68 19.359 21.879 23.681 24.558 24.996 25.021 24.85 24.935 25.081 24.57 24.473 24.059 23.718 23.45 23.012 23.024 22.171 21.587 20.82 20.102 19.712 18.982 18.519 17.533 17.046 16.766 16.084 15.779 15.073 15.792 18.543 21.258 23.559 24.935 25.325 25.447 25.483 25.301 25.934 25.958 25.629 25.447 24.899 24.509 24.546 24.047 23.243 22.914 22.354 21.185 20.93 20.564 19.529 19.176 18.653 17.995 17.387 16.717 16.254 16.242 17.898 20.759 23.072 24.996 26.445 26.299 26.494 26.469 26.019 26.896 26.725 26.53 25.982 25.325 24.996 24.57 24.473 23.864 23.048 22.025 21.185 20.491 19.834 19.578 18.653 18.166 17.52 17.046 16.084 16.108 17.131 19.347 22.123 23.949 25.325 26.494 25.97 25.836 25.873 26.25 26.494 25.885 25.349 25.021 24.473 24.01 23.584 22.951 22.585 21.989 21.027 20.272 19.493 18.835 18.592 17.667 17.192 16.583 16.108 15.609 16.473 18.446 21.088 23.584 24.558 25.435 25.374 25.459 25.361 25.532 25.398 25.252 24.838 24.29 23.937 23.072 22.914 22.853 22.074 21.185 20.65 19.992 19.225 18.689 17.63 17.289 16.352 16.303 15.731 15.134 15.268 16.826 19.493 22.038 23.45 25.069 24.972 24.899 25.045 24.935 24.923 24.947 24.387 24.059 24.01 23.024 23.048 22.646 22.464 21.563 20.54 20.199 19.542 18.592 18.214 17.569 16.9 16.242 15.743 15.305 14.757 14.623 15.986 18.117 20.869 22.963 24.241 25.045 24.838 24.558 24.46 24.874 25.045 24.46 23.523 23.633 22.732 22.963 22.902 22.573 21.551 20.99 20.296 19.115 18.604 18.081 17.338 16.863 16.218 15.743 15.122 14.83 14.428 15.658 18.543 20.844 22.391 23.961 24.29 24.095 23.9 24.509 24.46 24.241 23.62 23.511 23.121 23.048 22.732 22.622 21.965 21.197 20.394 19.602 19.115 18.555 17.581 17.508 16.644 15.28 15.329 14.696 14.318 14.16 15.548 18.068 20.844 22.403 23.9 24.923 24.448 24.01 23.949 24.46 24.521 24.57 23.998 23.426 23.523 22.951 22.902 22.305 21.928 21.124 20.516 19.602 19.115 18.653 18.044 17.204 16.571 16.242 15.694 15.158 15.231 15.962 17.947 21.051 22.975 25.021 24.996 25.41 25.483 25.325 25.544 25.556 25.934 25.374 24.412 24.387 23.961 23.584 23.353 22.549 21.928 21.319 20.187 19.809 19.128 18.507 17.861 16.778 16.339 16.193 15.256 15.231 16.668 18.787 21.514 23.438 24.899 25.483 25.544 25.167 25.483 25.349 25.544 25.228 24.899 24.46 23.474 23.438 23.584 22.354 22.171 21.088 20.516 19.639 19.03 18.568 17.667 17.143 16.668 16.242 15.548 15.037 15.585 17.959 20.321 22.902 24.363 24.509 24.801 24.972 24.923 24.935 24.692 24.546 24.034 23.474 23.535 23.048 22.695 21.989 21.465 21.1 20.248 19.59 19.03 18.068 17.557 16.851 16.12 15.816 15.755 14.72 15.548 17.581 19.956 22.111 23.353 24.448 24.692 24.509 24.57 24.363 24.363 24.546 23.572 23.06 23.121 22.914 22.671 22.403 22.025 21.051 20.236 19.676 18.945 18.214 17.764 17.082 16.486 15.694 15.512 14.939 14.72 15.365 17.155 20.041 22.914 23.937 24.278 24.497 24.339 24.473 24.339 24.874 24.521 23.815 23.511 23.048 22.951 22.585 22.038 21.514 20.759 19.834 19.505 18.677 18.068 17.387 16.693 15.597 15.755 15.158 14.44 14.501 15.658 18.068 20.443 22.744 23.986 24.241 24.01 24.12 23.681 24.57 24.339 24.034 23.633 22.902 23.024 22.865 22.537 22.086 21.149 20.516 20.102 19.103 18.689 17.63 17.094 16.766 16.084 15.658 14.891 14.099 14.379 14.659 16.948 19.736 21.709 23.511 23.535 23.937 23.998 23.913 23.913 24.132 23.998 23.535 23.072 22.951 22.573 22.074 21.989 21.587 20.467 20.114 19.079 18.568 17.703 17.082 16.753 16.108 15.317 15 14.513 14.367 14.233 15.913 18.921 21.003 23.024 23.608 24.375 24.29 24.46 24.424 24.972 24.521 24.412 23.998 23.45 23.486 22.999 22.914 22.573 21.551 21.039 20.272 19.529 33.673 32.962 31.372 30.77 29.783 29.309 28.615 27.701 27.245 28.067 30.641 35.846 39.152 42.311 43.262 42.97 43.243 42.403 42.494 42.896 43.115 43.225 41.71 41.071 41.252 40.066 39.427 38.824 37.417 36.686 35.098 34.294 32.98 32.176 31.682 30.697 29.893 28.888 27.757 26.587 27.044 28.961 32.705 36.23 39.682 41.71 42.349 41.71 41.326 41.618 41.855 42.421 41.672 40.522 40.157 39.572 39.463 38.678 37.966 37.399 35.792 34.988 33.692 33.673 31.847 31.519 30.094 29.218 27.976 27.958 26.861 26.204 26.752 29.437 33.308 36.851 39.298 41.089 40.979 40.577 40.979 40.412 41.071 40.229 40.211 39.536 39.389 38.239 38.806 38.093 37.289 35.792 35.006 33.893 32.833 32.066 30.88 30.076 29.455 28.597 27.556 27.062 25.492 25.181 25.912 28.798 32.888 36.286 38.587 40.358 40.376 40.229 40.066 40.358 40.339 40.303 39.025 38.732 38.732 38.111 37.417 37.472 36.485 35.737 34.568 33.601 32.888 30.86 30.076 29.399 28.523 27.701 27.154 26.24 25.729 24.889 24.797 24.797 28.34 33.163 35.866 38.587 39.572 39.389 39.536 39.499 39.298 39.572 39.499 38.659 38.824 38.093 37.91 37.417 36.485 35.866 35.153 33.673 32.98 31.519 30.715 30.02 28.742 28.414 27.136 26.66 26.296 24.944 24.323 24.614 26.77 30.788 34.166 36.907 39.298 39.371 40.102 39.298 39.353 39.371 39.463 38.788 38.678 37.984 37.892 37.253 37.106 36.577 35.408 34.367 33.655 32.194 31.445 30.167 29.893 29.035 27.647 27.062 26.35 25.492 24.925 25.601 26.752 30.587 34.075 37.216 39.445 39.427 39.518 39.152 39.353 39.664 39.298 38.806 38.477 37.874 38.057 37.289 37.126 36.559 35.701 34.331 33.692 32.285 31.646 30.386 30.02 29.29 28.067 27.976 26.843 26.296 25.747 25.985 28.798 33.016 35.701 38.788 40.924 40.924 40.832 40.87 41.015 40.942 40.924 40.211 40.139 39.608 39.536 39.445 39.007 37.984 37.052 36.085 34.897 34.294 33.016 32.122 31.573 30.313 30.076 29.254 28.322 27.775 26.77 28.03 32.321 36.157 38.806 41.69 42.257 42.331 42.494 42.421 42.805 42.695 42.568 42.403 41.071 40.906 40.229 40.157 39.608 38.368 37.271 36.559 35.024 34.313 33.673 32.122 31.555 30.641 29.309 28.523 27.647 26.989 26.332 27.482 31.262 35.134 38.732 40.376 41.471 41.891 41.618 41.344 41.636 41.672 41.819 40.211 40.066 40.229 39.646 39.043 38.185 37.399 36.632 35.245 33.893 33.107 32.048 30.86 30.221 29.309 28.597 27.737 27.116 26.204 25.235 26.788 29.381 33.344 36.577 39.499 40.267 41.051 40.76 40.229 40.486 40.778 40.85 39.682 39.28 39.499 38.696 38.605 38.111 36.505 36.065 35.062 34.24 33.728 32.011 30.989 30.04 28.541 28.559 27.683 26.935 26.441 25.456 24.944 26.917 30.313 34.093 37.271 39.445 40.43 40.267 40.339 40.211 40.175 40.924 40.01 38.969 39.518 38.659 38.824 38.038 37.034 36.577 35.701 34.568 33.107 32.212 31.573 30.623 29.381 28.724 27.757 27.628 26.332 25.565 25.016 25.418 27.757 31.427 34.897 38.038 40.229 40.303 40.85 40.139 40.339 40.285 40.796 40.303 38.824 38.75 38.806 37.874 38.111 37.381 36.431 35.701 33.874 33.509 32.212 30.806 30.149 30.002 28.633 27.847 26.788 26.368 25.655 25.583 28.487 31.901 35.317 38.239 40.066 40.796 40.486 40.175 40.595 40.87 40.87 40.504 39.956 39.499 39.608 39.244 38.824 38.093 36.706 36.577 34.952 34.021 33.016 31.865 31.628 30.569 29.399 29.309 28.396 27.92 27.19 27.701 31.081 35.08 38.111 40.942 42.257 43.262 42.914 43.243 43.225 43.042 43.663 42.695 42.349 42.421 41.837 40.924 40.997 40.139 38.057 37.345 36.395 35.153 34.258 33.619 32.176 30.916 30.788 29.819 28.798 27.757 28.03 29.966 33.619 37.709 41.125 42.805 43.718 43.39 42.914 44.011 44.011 43.901 44.011 42.823 42.311 41.71 40.832 41.125 40.066 38.878 38.038 36.577 35.354 34.403 33.509 33.125 31.135 30.13 29.948 28.559 28.669 29.162 31.921 35.719 39.17 41.618 43.024 42.458 43.061 43.189 43.042 43.171 43.225 42.421 41.618 40.76 40.997 40.303 38.878 38.513 37.327 36.614 35.81 34.294 33.764 32.542 31.501 30.733 29.819 28.798 27.409 27.61 29.29 31.993 35.5 39.098 41.509 43.153 42.568 42.257 42.403 42.458 43.316 42.604 42.239 41.581 40.997 40.87 40.175 39.098 38.696 37.892 36.047 36.011 34.294 33.619 32.669 31.993 30.806 29.966 29.162 28.669 27.811 28.414 30.989 35.006 38.257 40.979 42.311 43.189 42.331 42.421 43.225 43.042 43.153 42.476 41.509 41.71 41.015 40.559 39.883 38.788 38.732 37.18 35.774 34.714 33.545 32.906 32.212 30.88 30.076 29.108 28.669 27.847 27.683 30.514 33.418 37.106 40.267 42.038 43.225 42.622 42.403 42.403 43.153 43.243 42.97 42.311 41.764 41.015 40.267 39.737 38.897 37.984 37.381 35.426 34.733 34.385 32.852 32.194 31.081 30.806 29.327 28.231 27.811 26.642 28.34 31.445 34.861 38.623 40.906 42.403 42.421 42.257 43.061 43.171 43.115 43.262 43.153 42.239 41.891 40.924 40.942 40.267 39.572 38.477 37.198 36.395 35.153 34.148 33.601 32.906 32.14 30.989 29.966 29.309 28.742 29.783 32.906 36.778 40.631 43.225 44.011 44.449 44.558 44.576 45.307 45.362 45.088 44.924 44.212 43.262 43.153 42.202 41.581 40.687 39.919 38.806 37.289 36.065 35.207 34.24 33.746 32.176 31.336 30.641 29.71 29.327 29.948 32.761 36.907 40.175 42.896 44.011 44.449 44.522 44.576 43.883 45.49 44.813 44.704 43.115 43.171 42.568 41.618 40.87 40.285 38.86 38.129 36.796 35.737 35.281 33.746 32.761 32.122 31.135 29.966 29.254 28.487 31.262 35.153 38.732 41.819 43.718 43.883 43.901 43.754 43.955 43.718 43.754 42.878 42.331 41.581 40.942 40.43 39.938 39.317 37.948 38.057 35.92 35.299 34.184 32.815 32.395 31.354 29.948 29.29 28.615 27.92 28.559 31.262 35.171 38.587 41.509 43.189 43.024 43.408 43.243 42.476 43.189 42.914 42.55 41.198 40.796 40.376 39.791 39.427 38.878 37.874 36.686 35.134 34.294 33.746 32.176 31.354 30.77 30.076 29.363 28.523 27.007 27.116 27.757 31.28 34.934 38.386 41.125 41.819 42.476 42.532 42.275 42.568 42.421 41.764 41.782 40.85 40.211 40.285 39.371 38.969 38.294 37.216 36.011 35.062 33.692 33.016 31.901 31.682 30.569 29.017 28.03 28.195 27.116 26.35 27.5 30.44 34.331 37.546 40.157 41.29 42.257 41.71 41.071 41.18 42.184 41.071 41.015 40.084 40.285 39.463 39.317 38.897 37.673 36.724 35.774 34.184 33.527 32.542 31.409 30.532 30.02 29.254 27.829 27.007 26.296 26.167 26.35 28.688 32.011 36.23 39.188 40.577 41.29 40.87 40.87 40.705 40.85 40.87 40.303 39.445 39.463 38.696 38.185 38.02 37.819 36.907 35.701 34.532 33.692 32.833 31.829 30.934 30.386 29.309 28.396 27.683 27.116 26.204 26.368 28.961 33.473 36.541 39.59 41.509 42.349 42.038 42.202 42.331 41.819 42.458 41.819 41.746 40.979 40.85 40.175 40.157 39.572 38.167 37.216 36.194 35.207 33.947 33.746 32.194 31.007 30.77 29.857 29.18 27.902 26.989 27.775 30.989 35.08 38.806 42.202 43.171 43.097 43.097 43.243 43.481 43.864 43.736 43.298 42.568 41.509 41.29 41.071 40.358 39.682 38.111 37.216 36.286 34.897 33.673 32.924 32.102 31.208 29.893 29.162 28.468 28.195 29.017 31.847 35.737 39.317 41.545 43.262 43.153 43.225 42.988 43.061 43.262 43.171 42.331 41.764 40.796 40.504 39.992 39.389 38.605 37.564 36.085 35.024 34.514 33.728 32.669 31.555 30.788 29.966 29.108 28.103 27.647 28.798 31.61 35.518 39.427 41.983 42.622 42.622 42.532 42.257 42.458 42.239 42.604 41.545 41.051 40.979 40.229 40.175 38.933 37.948 37.546 36.194 35.08 34.495 33.4 32.267 31.445 30.569 29.218 28.378 28.724 27.08 26.332 26.989 29.638 33.235 36.833 39.956 41.563 42.385 42.55 42.311 42.385 42.914 42.532 41.69 40.942 40.942 40.211 39.956 39.59 38.659 37.984 36.286 35.92 34.733 33.673 32.249 31.19 30.842 30.002 29.363 28.669 27.737 26.825 25.985 25.456 27.976 32.011 35.627 39.152 40.924 41.618 41.143 41.618 41.855 41.216 42.532 41.71 40.906 40.76 40.267 39.445 39.536 38.458 37.747 36.541 35.665 34.441 33.655 32.048 31.481 30.697 29.929 29.29 28.378 27.427 26.515 26.057 27.683 30.697 34.642 38.111 40.631 41.618 41.545 41.636 41.782 42.421 42.476 42.494 41.69 40.924 40.76 40.358 40.285 39.427 38.897 37.966 36.706 35.792 34.733 33.655 32.924 32.066 30.842 30.587 29.875 29.236 28.396 27.902 28.669 31.336 35.627 39.809 42.275 43.792 43.754 43.408 43.736 44.467 44.594 44.558 44.576 43.864 43.39 43.243 42.494 41.563 40.942 39.682 38.33 37.399 36.431 35.171 34.294 33.326 32.194 31.262 30.806 30.203 29.236 27.884 28.34 30.002 33.545 38.257 41.015 42.476 43.937 44.65 44.029 44.083 44.65 45.088 44.942 44.284 43.298 43.189 42.311 42.202 41.545 40.157 38.933 37.948 37.052 35.665 35.006 33.746 32.815 32.14 31.262 30.02 29.437 28.468 27.884 29.236 32.687 36.541 40.01 41.965 43.682 43.243 43.225 43.864 44.011 44.011 44.011 43.061 43.097 42.421 42.056 41.71 40.832 40.267 38.587 37.91 36.706 34.988 34.532 33.583 32.176 32.212 30.641 30.86 29.674 28.322 28.048 28.378 30.77 34.24 38.294 41.125 42.988 43.024 43.298 42.97 43.334 43.901 44.212 44.284 42.805 42.349 42.458 41.509 40.997 40.267 39.298 38.093 36.961 36.085 35.08 33.82 33.052 32.176 32.048 30.788 30.002 29.162 28.487 28.03 28.816 32.267 36.157 39.956 42.311 43.225 43.901 43.682 43.973 44.284 44.248 44.668 43.736 43.189 42.532 41.782 41.819 40.997 40.229 39.152 38.312 37.327 35.938 34.733 34.075 32.962 32.14 31.519 30.569 29.857 29.053 27.775 27.829 28.87 33.125 36.796 39.353 41.545 43.042 43.115 43.189 43.097 43.883 44.431 44.138 43.225 42.331 42.349 41.746 40.577 40.412 39.59 38.659 37.526 36.139 35.134 34.403 33.509 32.542 31.72 30.842 30.094 29.089 28.414 27.757 27.701 29.929 33.326 37.144 40.942 42.731 43.298 42.952 43.591 43.973 44.65 44.558 44.632 43.828 43.225 43.189 42.421 42.421 41.782 40.631 39.499 38.678 37.271 36.467 35.482 34.495 33.728 32.888 32.194 31.372 30.661 29.875 29.29 29.966 33.016 37.253 40.85 43.736 45.38 45.854 45.544 45.416 45.854 46.714 46.64 46.184 44.869 43.955 44.558 43.955 43.061 42.532 41.782 40.339 39.791 37.892 36.632 35.719 34.495 33.673 32.743 32.359 31.501 30.587 29.327 28.414 29.473 32.761 37.417 40.979 42.731 44.704 44.594 44.449 45.854 44.813 46.184 46.111 45.454 44.393 43.955 43.171 43.153 42.166 41.29 40.303 39.353 38.129 36.796 35.792 34.313 33.527 33.583 32.249 30.952 30.623 29.254 28.322 28.559 30.788 33.965 37.892 40.102 42.695 43.81 43.973 43.937 43.754 44.723 44.632 44.795 43.937 42.988 42.604 42.112 41.819 41.18 40.066 38.696 37.837 36.485 35.225 34.403 33.545 32.632 31.975 30.733 30.661 29.381 28.633 27.811 27.884 30.514 34.568 38.477 40.906 43.042 44.011 43.262 43.061 44.065 43.864 43.718 43.973 42.731 42.568 42.403 41.509 41.143 40.486 39.536 38.185 36.559 36.686 35.098 34.258 33.052 31.993 31.519 30.661 29.819 29.309 28.414 27.775 28.541 31.501 35.627 39.938 41.764 43.262 42.988 43.663 43.243 43.718 44.029 43.864 43.171 43.115 42.275 41.929 41.417 40.942 40.211 38.806";
QFile mHeadFile;
QFile mIntervalsFile;
QFile mMarksFile;
QFile mRawDataFile;
QFile mTestData;
QFile mRawDataSessionRecordFile;

uint64_t startTimeStampRecord {0};
uint16_t mCurrentLabelIndex;

bool isDownloadGraph = false;
bool isPlayRecord = true;
int currSpeed = speed::SpeedX1;
_mSPIData *mAllRecordedDataBuffer = nullptr;
uint mSizeAllRecordedData = 0, mSizeFirstInterval = 0, mSizeSecondInterval = 0;

uint8_t mCurrentIntervalNum {0};



MainPage::MainPage(QWidget *parent)
  : IPageWidget(parent)
  , mUpdateDateTimeTimer(new QTimer(this))
  , ui(new Ui::MainPage)
{
  ui->setupUi(this);

  setupButtons();
  setupMainMenu();        // Настройка окна главного меню
  setupBottomInfoSVG();   // Настройки нижних иконок-уведомлений
  setupGraphsContainer(); // Настройка контейнера с графиками

  mUpdateDateTimeTimer->setInterval(60000); // Настраиваем обновление виджета с текущим временем

  mVolumeInputPage = new VolumeInputPage(this, 0);
  mVolumeInputPage->hide();
  connect(mVolumeInputPage, &VolumeInputPage::previousPage, this, &MainPage::previousPage);
  connect(mVolumeInputPage, &VolumeInputPage::changePage, this, &MainPage::changePage);

  mParamInputPage = new VolumeInputPage(this, 1);
  mParamInputPage->hide();
  connect(mParamInputPage, &VolumeInputPage::previousPage, this, &MainPage::previousPage);
  connect(mParamInputPage, &VolumeInputPage::changePage, this, &MainPage::changePage);
  connect(mParamInputPage, &VolumeInputPage::intervalParamUpdated, [this]() { mCurrentGraphsArea->mFirstInterval->averagePlot();});

  connect(mUpdateDateTimeTimer, &QTimer::timeout, this, &MainPage::updateDateTime);
  connect(this, &MainPage::playBtnPressed, [this](){mCurrentGraphsArea->mRecordedGraph->animateGraphic(currSpeed);});//&RecordedPlot::animateGraphic);
  connect(mCurrentGraphsArea->mRecordedGraph, &RecordedPlot::changeBtnIcon,[this]()
  {
    //ui->playRecord            ->setIcon(QIcon(":/icons/playRecord.svg"),QIcon(":/icons/playRecord_pressed.svg"));
    ui->intervalButton        ->setEnabled(true);
    ui->goToInterval1Button   ->setEnabled(true);
    ui->goToInterval2Button   ->setEnabled(true);
    ui->goToNextMarkButton    ->setEnabled(true);
    ui->goToPreviousMarkButton->setEnabled(true);
    ui->makeLabelButton       ->setEnabled(true);
    ui->sessionButton         ->setEnabled(true);
//    ui->rewindRecordButton    ->setEnabled(true);
//    ui->speedRecordButton     ->setEnabled(true);
    ui->zoomInterval1Button   ->setEnabled(true);
    ui->zoomInterval2Button   ->setEnabled(true);
    ui->dVInputButton         ->setEnabled(true);
    ui->markPPointButton      ->setEnabled(true);
    ui->downloadGraphButton   ->setEnabled(true);// временно
  } );

#ifdef PC_BUILD
  ui->averageValue->setFont(QFont("Noto Sans", 60, 400));
  ui->mInfoInterval1->setFont(QFont("Noto Sans", 8, 400));
  ui->mInfoInterval2->setFont(QFont("Noto Sans", 8, 400));
#endif
  ui->averageValue->hide();
}

MainPage::~MainPage()
{
  mUpdateDateTimeTimer->stop();
  delete mUpdateDateTimeTimer;
  DESTROY_CLASS(mVolumeInputPage);
  DESTROY_CLASS(mParamInputPage);
  delete ui;
}


#define BUT_SIZE_BIG (100*720/1280)
#define BUT_SIZE_SMALL (100*480/720)
void MainPage::setupButtons()
{
  // Общий стиль для кнопок
  const QString ToolButtonStyleSheet = readStyleSheetFile(":/styles/ToolButtons.qss");

  // Кнопка записи
  ui->recordButton->setIcon(QIcon(":/icons/startRecord.svg"), QIcon(":/icons/startRecord_pressed.svg"));
  ui->recordButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->recordButton->setStyleSheet(ToolButtonStyleSheet);
  ui->recordButton->hide();

  // Кнопка установки метки
  ui->makeLabelButton->setIcon(QIcon(":/icons/selectData.svg"), QIcon(":/icons/selectData_pressed.svg"));
  ui->makeLabelButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->makeLabelButton->setStyleSheet(ToolButtonStyleSheet);
  ui->makeLabelButton->hide();

  // Кнопка экрана домой
  ui->homeButton->setIcon(QIcon(":/icons/settings.svg"), QIcon(":/icons/settings_pressed.svg"));
  ui->homeButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->homeButton->setStyleSheet(ToolButtonStyleSheet);

  // Кнопка начала сессии
  ui->sessionButton->setIcon(QIcon(":/icons/newSession.svg"), QIcon(":/icons/newSession_pressed.svg"));
  ui->sessionButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->sessionButton->setStyleSheet(ToolButtonStyleSheet);

  // Кнопка подтверждения метки
  ui->acceptMarkButton->setIcon(QIcon(":/icons/accept.svg"), QIcon(":/icons/accept_pressed.svg"));
  ui->acceptMarkButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->acceptMarkButton->setStyleSheet(ToolButtonStyleSheet);
  ui->acceptMarkButton->hide();

  // Кнопка удаления метки
  ui->rejectMarkButton->setIcon(QIcon(":/icons/reject.svg"), QIcon(":/icons/reject_pressed.svg"));
  ui->rejectMarkButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->rejectMarkButton->setStyleSheet(ToolButtonStyleSheet);
  ui->rejectMarkButton->hide();

  // Кнопки интервалов
  ui->intervalButton->setIcon(QIcon(":/icons/startInterval1.svg"), QIcon(":/icons/startInterval1_pressed.svg"));
  ui->intervalButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->intervalButton->setStyleSheet(ToolButtonStyleSheet);
  ui->intervalButton->hide();

  // Кнопка подтверждения интервала
  ui->acceptIntervalButton->setIcon(QIcon(":/icons/accept.svg"), QIcon(":/icons/accept_pressed.svg"));
  ui->acceptIntervalButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->acceptIntervalButton->setStyleSheet(ToolButtonStyleSheet);
  ui->acceptIntervalButton->hide();

  // Кнопка удаления интервала
  ui->rejectIntervalButton->setIcon(QIcon(":/icons/reject.svg"), QIcon(":/icons/reject_pressed.svg"));
  ui->rejectIntervalButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->rejectIntervalButton->setStyleSheet(ToolButtonStyleSheet);
  ui->rejectIntervalButton->hide();

  // Кнопка перехода к 1 интервалу
  ui->goToInterval1Button->setIcon(QIcon(":/icons/firstInterval.svg"),QIcon(":/icons/firstInterval_pressed.svg"));
  ui->goToInterval1Button->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->goToInterval1Button->setStyleSheet(ToolButtonStyleSheet);
  ui->goToInterval1Button->hide();

  // Кнопка перехода ко 2 интервалу
  ui->goToInterval2Button->setIcon(QIcon(":/icons/secondInterval.svg"),QIcon(":/icons/secondInterval_pressed.svg"));
  ui->goToInterval2Button->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->goToInterval2Button->setStyleSheet(ToolButtonStyleSheet);
  ui->goToInterval2Button->hide();

  ui->goToNextMarkButton->setIcon(QIcon(":/icons/nextLabel.svg"),QIcon(":/icons/nextLabel_pressed.svg"));
  ui->goToNextMarkButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->goToNextMarkButton->setStyleSheet(ToolButtonStyleSheet);
  ui->goToNextMarkButton->show();

  ui->goToPreviousMarkButton->setIcon(QIcon(":/icons/previousLabel.svg"),QIcon(":/icons/previousLabel_pressed.svg"));
  ui->goToPreviousMarkButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->goToPreviousMarkButton->setStyleSheet(ToolButtonStyleSheet);
  ui->goToPreviousMarkButton->show();

  ui->goToPreviousMarkButton->hide();
  ui->goToNextMarkButton->hide();
  ui->labelsNavigation->hide();

  ui->mInfoInterval1->hide();
  ui->mInfoInterval2->hide();

  ui->alarmLevelICPWidget->hide();
  ui->sensorStateLabel->hide();

  ui->playRecord->setIcon(QIcon(":/icons/playRecord.svg"),QIcon(":/icons/playRecord_pressed.svg"));
  ui->playRecord->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->playRecord->setStyleSheet(ToolButtonStyleSheet);
  ui->playRecord->hide();

  ui->rewindRecordButton->setIcon(QIcon(":/icons/rewindRecord.svg"),QIcon(":/icons/rewindRecord_pressed.svg"));
  ui->rewindRecordButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->rewindRecordButton->setStyleSheet(ToolButtonStyleSheet);
  ui->rewindRecordButton->hide();

  ui->speedRecordButton->setIcon(QIcon(":/icons/speedX1.svg"),QIcon(":/icons/speedX1_pressed.svg"));
  ui->speedRecordButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->speedRecordButton->setStyleSheet(ToolButtonStyleSheet);
  ui->speedRecordButton->hide();

  ui->downloadGraphButton->setIcon(QIcon(":/icons/downloadGraph.svg"),QIcon(":/icons/downloadGraph_pressed.svg"));
  ui->downloadGraphButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->downloadGraphButton->setStyleSheet(ToolButtonStyleSheet);
  ui->downloadGraphButton->hide();

  ui->goBackToGraphButton->setIcon(QIcon(":/icons/goBack.svg"),QIcon(":/icons/goBack_pressed.svg"));
  ui->goBackToGraphButton->setIconSize(QSize(BUT_SIZE_BIG, BUT_SIZE_BIG));
  ui->goBackToGraphButton->setStyleSheet(ToolButtonStyleSheet);
  ui->goBackToGraphButton->hide();

  ui->zoomInterval1Button->setIcon(QIcon(":/icons/zoomFirstInterval.svg"),QIcon(":/icons/zoomFirstInterval_pressed.svg"));
  ui->zoomInterval1Button->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->zoomInterval1Button->setStyleSheet(ToolButtonStyleSheet);
  ui->zoomInterval1Button->hide();

  ui->zoomInterval2Button->setIcon(QIcon(":/icons/zoomSecondInterval.svg"),QIcon(":/icons/zoomSecondInterval_pressed.svg"));
  ui->zoomInterval2Button->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->zoomInterval2Button->setStyleSheet(ToolButtonStyleSheet);
  ui->zoomInterval2Button->hide();

  ui->funcFirstButton->setIcon(QIcon(":/icons/func1.svg"),QIcon(":/icons/func1_pressed.svg"));
  ui->funcFirstButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->funcFirstButton->setStyleSheet(ToolButtonStyleSheet);
  ui->funcFirstButton->hide();

  ui->funcSecondButton->setIcon(QIcon(":/icons/func2.svg"),QIcon(":/icons/func2_pressed.svg"));
  ui->funcSecondButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->funcSecondButton->setStyleSheet(ToolButtonStyleSheet);
  ui->funcSecondButton->hide();

  ui->markPPointButton->setIcon(QIcon(":/icons/func3.svg"),QIcon(":/icons/func3_pressed.svg"));
  ui->markPPointButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->markPPointButton->setStyleSheet(ToolButtonStyleSheet);
  ui->markPPointButton->hide();

  ui->dVInputButton->setIcon(QIcon(":/icons/inputVolume.svg"),QIcon(":/icons/inputVolume_pressed.svg"));
  ui->dVInputButton->setIconSize(QSize(BUT_SIZE_SMALL, BUT_SIZE_SMALL));
  ui->dVInputButton->setStyleSheet(ToolButtonStyleSheet);
  ui->dVInputButton->hide();
}
void MainPage::setupBottomInfoSVG()
{
  ui->softwareStorageIconSVG->setMaximumSize(48, 60);
}
void MainPage::setupMainMenu()
{
  if (mMainMenu) { return; }
  mMainMenu = new MainMenu(this);
  mMainMenu->hide();    // Скрываем основное меню

  // Смена виджета
  connect(mMainMenu, &IPageWidget::previousPage, this, &IPageWidget::previousPage);
  connect(mMainMenu, &IPageWidget::changePage, this, &IPageWidget::changePage);
}
void MainPage::setupGraphsContainer()
{
  mCurrentGraphsArea = ui->currentGraphsArea;   // Добавляем графики в контейнер
  mGraphWidgetContainer.push_back(mCurrentGraphsArea);
}
void MainPage::installController(MonitorController *controller)
{
  if (!controller) { return; }

  mController = controller;

  ui->alarmLevelICPWidget->installController(mController);
  mCurrentGraphsArea->installController(mController);
  mMainMenu->installController(mController);

  connect(mController, &MonitorController::controllerEvent, this, &MainPage::controllerEventHandler);

  retranslate();
}
void MainPage::controllerEventHandler(ControllerEvent event)
{
  switch(event)
  {
    case ControllerEvent::GlobalTimeUpdate:
    {
      updateDateTime();
      break;
    }
    case ControllerEvent::LabelCreated:
    {
      //updateLabelCounter();
      break;
    }
    default: break;
  }
}
void MainPage::updateLabelCounter()
{
  // Если контроллер не установлен
  if (!mController) { return; }
  // Подготовка шаблона для заполнения
  const QString counterLabelText = tr("Меток: %1");
  const QString currentLabelText = tr("%1/%2");
  // Запрос у контроллера кол-ва меток за текущую сессию
  int countLabels = mController->getLabelsCountPerCurrentSession();
  if (countLabels > 0)
  {
    //ui->labelCounterLabel->setText(counterLabelText.arg(mLabelManagerGlobal->mCountLabels));
    ui->labelsNavigation->setText(currentLabelText.arg(mCurrentLabelIndex+1).arg(mLabelManagerGlobal->mCountLabels));
  } else {
    //ui->labelCounterLabel->setText(tr("Меток: "));
  }
}
void MainPage::scaleFont(float scaleFactor)
{
  ui->alarmLevelICPWidget ->scaleFont(scaleFactor);
  mCurrentGraphsArea      ->scaleFont(scaleFactor);
  mMainMenu               ->scaleFont(scaleFactor);

  WFontScaling(ui->dateTimeLabel,     scaleFactor);
  WFontScaling(ui->sensorStateLabel,  scaleFactor);
  WFontScaling(ui->labelsNavigation,  scaleFactor);
  WFontScaling(ui->mInfoInterval1,    scaleFactor);
  WFontScaling(ui->mInfoInterval2,    scaleFactor);
  WFontScaling(ui->averageValue,      scaleFactor);
//  WFontScaling(ui->speedRecordButton, scaleFactor);
//  WFontScaling(ui->rewindRecordButton,scaleFactor);
  //WFontScaling(ui->playRecord,        scaleFactor);
  WFontScaling(ui->dVInputButton,     scaleFactor);
  WFontScaling(ui->markPPointButton,     scaleFactor);

}
void MainPage::updateDateTime()
{
  auto currentDateTime = QDateTime::currentDateTime().toString("hh:mm\ndd.MM.yyyy");
  if (currentDateTime != mLastDateTime)
  {
    ui->dateTimeLabel->setText(currentDateTime);
    mLastDateTime = currentDateTime;
  }
}
void MainPage::nextGraph()
{
  int countGraph = mGraphWidgetContainer.size();  // Кол-во графиков
  if (countGraph < 2) { return; }                 // Если в списке меньше одного графика
  mGraphWidgetContainer[mGraphNumber]->hide();    // Скрываем текущий график

  mGraphNumber++;
  mGraphNumber %= countGraph;
  mGraphWidgetContainer[mGraphNumber]->show();    // Показываем следующий график
}
void MainPage::showEvent(QShowEvent */*event*/)
{
  updateDateTime();
  mUpdateDateTimeTimer->start();
}
void MainPage::hideEvent(QHideEvent */*event*/)
{
  mUpdateDateTimeTimer->stop();
}
void MainPage::retranslate()
{
  mCurrentGraphsArea->retranslate();
  updateLabelCounter();
  mMainMenu->retranslate();
  //ui->averageICPWidget->retranslate();
  //updateSessionInfo(); !!!!
  //updateSensorState();
  //updateSensorInfo();
}
void MainPage::on_homeButton_clicked()
{
  emit changePage(mMainMenu);
}
void MainPage::on_recordButton_clicked()
{
  QString currentTime = QDateTime::currentDateTime().toString("yyyy_MM_dd@hh_mm_ss");
  if (isStart)
  {
    mCurrentGraphsArea->resetGraphOfCurrentValues();

    isStart = false;
    mCurrentRecordDir.setPath(mntDirectory+ "/" + currentTime);
    ui->recordButton->setIcon(QIcon(":/icons/stopRecord.svg"), QIcon(":/icons/stopRecord_pressed.svg"));

    mHeadFile.setFileName(mCurrentRecordDir.path()      + "/" + "HEAD.txt");
    mIntervalsFile.setFileName(mCurrentRecordDir.path() + "/" + "INTERVALS.txt");
    mMarksFile.setFileName(mCurrentRecordDir.path()     + "/" + "MARKS.txt");
    mRawDataFile.setFileName(mCurrentRecordDir.path()   + "/" + "RAW_DATA.txt");
    mRawDataSessionRecordFile.setFileName(mCurrentRecordDir.path()   + "/" + "SESSION_RECORD_DATA.txt");

    qDebug() << mCurrentRecordDir.path();
    if (!mCurrentRecordDir.exists())
    {
#ifdef TEST_BUILD
      QString response;
      response = executeAConsoleCommand("mkdir", QStringList() << "-p" << mCurrentRecordDir.path());
      if (response == "")
      {
        qDebug() << "Dir open = "<< mCurrentRecordDir.path();
      }
      else
      {
        qDebug() << "error" << response;
      }
#endif
#ifdef PC_BUILD
      mCurrentRecordDir.mkdir(mCurrentRecordDir.path());
#endif
    }
    if (mHeadFile.open(QIODevice::WriteOnly | QIODevice::Append))
    {
      QStringList time = currentTime.split("@");
      mHeadFile.write(("Session started: " + time[0].replace("_", ".") + " " + time[1].replace("_", ":") +
          "\nStartTimeStamp(ms): " + QString::number(getCurrentTimeStampMS()) + "\n").toLatin1());
      mHeadFile.close();
    }

    ui->mainWidgets   ->show();
    ui->sessionButton ->setEnabled(false);
    mRawDataFile.open(QIODevice::WriteOnly | QIODevice::Append);

    mCurrentGraphsArea->isRecord = true;
    mCurrentGraphsArea->mReadSPI->isRecording = true;
    mCurrentGraphsArea->resetGraphOfCurrentValues();

  }
  else
  {
    uint64_t StopMS = getCurrentTimeStampMS();
    ui->recordButton->setIcon(QIcon(":/icons/startRecord.svg"), QIcon(":/icons/startRecord_pressed.svg"));
    currentTime = QDateTime::currentDateTime().toString("yyyy.MM.dd hh:mm:ss");
    if (mHeadFile.open(QIODevice::WriteOnly | QIODevice::Append))
    {
      QStringList time = currentTime.split("@");
      mHeadFile.write(("Session stopped: " + currentTime + "\nStopTimeStamp(ms): " + QString::number(StopMS) + "\n").toLatin1());
      mHeadFile.close();
    }
    isStart = true;

#define SET_VISIBLED_DISABLED(_UUII) {ui->_UUII->show();  ui->_UUII->setEnabled(false);}
#define SET_VISIBLED_ENABLED(_UUII) {ui->_UUII->show();  ui->_UUII->setEnabled(true);}

    ui->intervalButton      ->show();
    //ui->playRecord          ->show();
//    ui->rewindRecordButton  ->show();
//    ui->speedRecordButton   ->show();
    ui->downloadGraphButton ->show();
    ui->dVInputButton       ->show();
    ui->markPPointButton    ->show();

    ui->goToInterval1Button ->hide();
    ui->mInfoInterval1      ->hide();
    ui->goToInterval2Button ->hide();
    ui->mInfoInterval2      ->hide();
    ui->recordButton        ->hide();
    ui->alarmLevelICPWidget ->hide();
    ui->averageValue        ->hide();

    ui->sessionButton       ->setEnabled(true);

    SET_VISIBLED_DISABLED(goToPreviousMarkButton);
    SET_VISIBLED_DISABLED(labelsNavigation);
    ui->labelsNavigation->setText("0/0");
    SET_VISIBLED_DISABLED(goToNextMarkButton);
    SET_VISIBLED_ENABLED(makeLabelButton);

    mRawDataFile.close();
    mCurrentGraphsArea->stopWork();
    mCurrentGraphsArea->changeGraph(1);

    mSizeAllRecordedData = mRawDataFile.size()/6;
    mAllRecordedDataBuffer = new _mSPIData[mSizeAllRecordedData];
    mRawDataFile.open(QIODevice::ReadOnly);
    mRawDataFile.read((char*)mAllRecordedDataBuffer, mRawDataFile.size());
    mRawDataFile.close();
    mCurrentGraphsArea->addDataOnRecordedPlot();
  }
}
void MainPage::on_makeLabelButton_clicked()
{
  ui->acceptMarkButton        ->show();
  ui->rejectMarkButton        ->show();
  ui->makeLabelButton         ->setEnabled(false);
  ui->sessionButton           ->setEnabled(false);
  ui->goToPreviousMarkButton  ->setEnabled(false);
  ui->goToNextMarkButton      ->setEnabled(false);
  ui->goToInterval1Button     ->setEnabled(false);
  ui->goToInterval2Button     ->setEnabled(false);
  ui->intervalButton          ->setEnabled(false);
  //ui->playRecord              ->setEnabled(false);
//  ui->rewindRecordButton      ->setEnabled(false);
//  ui->speedRecordButton       ->setEnabled(false);
  ui->downloadGraphButton     ->setEnabled(false);
  ui->zoomInterval1Button     ->setEnabled(false);
  ui->zoomInterval2Button     ->setEnabled(false);
  ui->dVInputButton           ->setEnabled(false);
  ui->markPPointButton        ->setEnabled(false);

  QTimer::singleShot(0, mController, [this](){ mController->makeLabel(); });
  //emit (changeLabelButtonStatus);
}
void MainPage::on_acceptMarkButton_clicked()
{
  ui->labelsNavigation    ->show();
  ui->acceptMarkButton    ->hide();
  ui->rejectMarkButton    ->hide();
  ui->makeLabelButton     ->setEnabled(true);
  ui->intervalButton      ->setEnabled(true);
  ui->sessionButton       ->setEnabled(true);
  ui->goToInterval1Button ->setEnabled(true);
  ui->goToInterval2Button ->setEnabled(true);
  //ui->playRecord          ->setEnabled(true);
//  ui->rewindRecordButton  ->setEnabled(true);
//  ui->speedRecordButton   ->setEnabled(true);
  ui->downloadGraphButton ->setEnabled(true);
  ui->zoomInterval1Button ->setEnabled(true);
  ui->zoomInterval2Button ->setEnabled(true);
  ui->dVInputButton       ->setEnabled(true);
  ui->markPPointButton    ->setEnabled(true);

  mMarksFile.open(QIODevice::WriteOnly | QIODevice::Append);
  mMarksFile.write((QString::number(mLabelManagerGlobal->mCountLabels) + ": " + QString::number(mCoordLabelX) + "\n").toLatin1());
  mMarksFile.close();
  mLabelItemsContainer.back()->getLabel()->mCurrentPos = (float)mCoordLabelX/1000;

  if (mIntervalsCount < 4) { ui->intervalButton->show(); }
  mCurrentGraphsArea->addOrDeleteNewItem(true);
  updateLabelCounter();
  if (ui->labelsNavigation->text() != "0/0")
  {
    ui->goToPreviousMarkButton ->setEnabled(true);
    ui->goToNextMarkButton     ->setEnabled(true);
  }
}
void MainPage::on_rejectMarkButton_clicked()
{
  ui->acceptMarkButton    ->hide();
  ui->rejectMarkButton    ->hide();
  ui->makeLabelButton     ->setEnabled(true);
  ui->intervalButton      ->setEnabled(true);
  ui->sessionButton       ->setEnabled(true);
  ui->goToInterval1Button ->setEnabled(true);
  ui->goToInterval2Button ->setEnabled(true);
  //ui->playRecord          ->setEnabled(true);
//  ui->rewindRecordButton  ->setEnabled(true);
//  ui->speedRecordButton   ->setEnabled(true);
  ui->downloadGraphButton ->setEnabled(true);
  ui->zoomInterval1Button ->setEnabled(true);
  ui->zoomInterval2Button ->setEnabled(true);
  ui->dVInputButton       ->setEnabled(true);
  ui->markPPointButton    ->setEnabled(true);

  if (mIntervalsCount < 4) { ui->intervalButton->show(); }
  mCurrentGraphsArea->addOrDeleteNewItem(false);
  if (ui->labelsNavigation->text() != "0/0")
  {
    ui->goToPreviousMarkButton ->setEnabled(true);
    ui->goToNextMarkButton     ->setEnabled(true);
  }
}
void MainPage::startSession()
{
  ui->sessionButton->setIcon(QIcon(":/icons/deleteSession.svg"), QIcon(":/icons/deleteSession_pressed.svg"));
  connect(this, &MainPage::setAveragePointerPos, ui->alarmLevelICPWidget, &AlarmLevelICPWidget::updateAverageValueOnWidgets);
  ui->recordButton        ->show();
  ui->alarmLevelICPWidget ->show();
  ui->averageValue        ->show();
  ui->homeButton          ->hide();
  ui->makeLabelButton     ->hide();
  ui->acceptMarkButton    ->hide();
  ui->rejectMarkButton    ->hide();
  ui->recordButton        ->setEnabled(true);

  //ui->averageICPWidget->show();
  mCurrentLabelIndex = 0;
  mCurrentGraphsArea->startPlotting();
  mCurrentGraphsArea->startWork();
}
void MainPage::stopSession()
{
  ui->sessionButton->setIcon(QIcon(":/icons/newSession.svg"), QIcon(":/icons/newSession_pressed.svg"));
  mCurrentGraphsArea->stopPlotting();
  isDownloadGraph = false;

  mCurrentGraphsArea->changeGraph(0);
  mCurrentGraphsArea->resetGraphOfCurrentValues();

  ui->homeButton            ->show();
  ui->makeLabelButton       ->hide();
  ui->acceptMarkButton      ->hide();
  ui->rejectMarkButton      ->hide();
  ui->recordButton          ->hide();
  ui->intervalButton        ->hide();
  ui->acceptIntervalButton  ->hide();
  ui->rejectIntervalButton  ->hide();
  ui->goToInterval1Button   ->hide();
  ui->goToInterval2Button   ->hide();
  ui->labelsNavigation      ->hide();
  ui->goToPreviousMarkButton->hide();
  ui->goToNextMarkButton    ->hide();
  ui->mInfoInterval1        ->hide();
  ui->mInfoInterval2        ->hide();
  ui->averageValue          ->hide();
  ui->alarmLevelICPWidget   ->hide(); //или оставить?
  //ui->playRecord            ->hide();
//  ui->rewindRecordButton    ->hide();
//  ui->speedRecordButton     ->hide();
  ui->downloadGraphButton   ->hide();
  ui->zoomInterval1Button   ->hide();
  ui->zoomInterval2Button   ->hide();
  ui->dVInputButton         ->hide();
  ui->markPPointButton      ->hide();

  mCurrentGraphsArea->stopWork();
  mCurrentGraphsArea->stopWorkDraw();

  mCurrentGraphsArea->removeAllGraphs();
  ui->intervalButton->setIcon(QIcon(":/icons/startInterval1.svg"), QIcon(":/icons/startInterval1_pressed.svg"));
}
void MainPage::on_sessionButton_clicked()
{
  if (isSessionStart)
  {
    isSessionStart = false;
    startSession();
  }
  else
  {
    isSessionStart = true;
    stopSession();
  }
}
void MainPage::on_intervalButton_clicked()
{
  ui->acceptIntervalButton    ->show();
  ui->rejectIntervalButton    ->show();
  ui->makeLabelButton         ->setEnabled(false); //ui->makeLabelButton->hide();
  ui->sessionButton           ->setEnabled(false);
  ui->goToPreviousMarkButton  ->setEnabled(false);
  ui->goToNextMarkButton      ->setEnabled(false);
  ui->goToInterval1Button     ->setEnabled(false);
  ui->goToInterval2Button     ->setEnabled(false);
  //ui->playRecord              ->setEnabled(false);
//  ui->rewindRecordButton      ->setEnabled(false);
//  ui->speedRecordButton       ->setEnabled(false);
  ui->downloadGraphButton     ->setEnabled(false);
  ui->zoomInterval1Button     ->setEnabled(false);
  ui->zoomInterval2Button     ->setEnabled(false);
  ui->dVInputButton           ->setEnabled(false);
  ui->markPPointButton        ->setEnabled(false);

  mCurrentGraphsArea->addIntervalOnRecordedGraph();
  if (isIntervalCreating)
  {
    ui->intervalButton->setEnabled(false);
  }
}
void MainPage::on_acceptIntervalButton_clicked()
{
  if (isStartInterval)
  {
    if (mIntervalsCount == 1)
    {
      ui->intervalButton->setIcon(QIcon(":/icons/stopInterval1.svg"), QIcon(":/icons/stopInterval1_pressed.svg"));
    }
    else
    {
      ui->intervalButton->setIcon(QIcon(":/icons/stopInterval2.svg"), QIcon(":/icons/stopInterval2_pressed.svg"));
    }
    isStartInterval = false;
  }
  else
  {
    ui->intervalButton->setIcon(QIcon(":/icons/startInterval2.svg"), QIcon(":/icons/startInterval2_pressed.svg"));
    isStartInterval = true;
  }
  mIntervalsFile.open(QIODevice::WriteOnly | QIODevice::Append);
  mIntervalsFile.write((QString::number(mIntervalsCount) + ": " + QString::number(mIntervalsContainer[mIntervalsCount-1]->mIntervalPos) + "\n").toLatin1());
  mIntervalsFile.close();

  ui->acceptIntervalButton  ->hide();
  ui->rejectIntervalButton  ->hide();
  ui->makeLabelButton       ->setEnabled(true);
  ui->sessionButton         ->setEnabled(true);
  ui->goToInterval1Button   ->setEnabled(true);
  ui->goToInterval2Button   ->setEnabled(true);
  ui->intervalButton        ->setEnabled(true);
//  ui->playRecord            ->setEnabled(true);
//  ui->rewindRecordButton    ->setEnabled(true);
//  ui->speedRecordButton     ->setEnabled(true);
  ui->downloadGraphButton   ->setEnabled(true);
  ui->zoomInterval1Button   ->setEnabled(true);
  ui->zoomInterval2Button   ->setEnabled(true);
  ui->dVInputButton         ->setEnabled(true);
  ui->markPPointButton      ->setEnabled(true);

  mCurrentGraphsArea->addOrDeleteNewItem(true);

  const QString intervalDataPreset = tr("Максимум\n%1\nСреднее\n%2"); //перевести потом

  if (mIntervalsCount % 2 == 0)
  {
    mCurrentGraphsArea->colorInterval();
    if (mIntervalsCount == 2)
    {
      ui->mInfoInterval1      ->setText(intervalDataPreset.arg(mIntervalsContainer[mIntervalsCount-1]->maxIntervalValue, 0, 'f', 1).arg(mIntervalsContainer[mIntervalsCount-1]->averageIntervalValue, 0, 'f', 1));
      ui->goToInterval1Button ->show();
      ui->mInfoInterval1      ->show();
      ui->zoomInterval1Button ->show();
    }
    else
    {
      ui->mInfoInterval2      ->setText(intervalDataPreset.arg(QString::number(mIntervalsContainer[mIntervalsCount-1]->maxIntervalValue, 'f', 1)).arg(QString::number(mIntervalsContainer[mIntervalsCount-1]->averageIntervalValue, 'f', 1)));
      ui->goToInterval2Button ->show();
      ui->mInfoInterval2      ->show();
      ui->intervalButton      ->hide();
      ui->zoomInterval2Button ->show();
    }
  }
  if (ui->labelsNavigation->text() != "0/0")
  {
    ui->goToPreviousMarkButton  ->setEnabled(true);
    ui->goToNextMarkButton      ->setEnabled(true);
  }
}
void MainPage::on_rejectIntervalButton_clicked()
{
  ui->acceptIntervalButton  ->hide();
  ui->rejectIntervalButton  ->hide();
  ui->makeLabelButton       ->setEnabled(true);
  ui->sessionButton         ->setEnabled(true);
  ui->goToInterval1Button   ->setEnabled(true);
  ui->goToInterval2Button   ->setEnabled(true);
  ui->intervalButton        ->setEnabled(true);
//  ui->playRecord            ->setEnabled(true);
//  ui->rewindRecordButton    ->setEnabled(true);
//  ui->speedRecordButton     ->setEnabled(true);
  ui->downloadGraphButton   ->setEnabled(true);
  ui->zoomInterval1Button   ->setEnabled(true);
  ui->zoomInterval2Button   ->setEnabled(true);
  ui->dVInputButton         ->setEnabled(true);
  ui->markPPointButton      ->setEnabled(true);

  if (ui->labelsNavigation->text() != "0/0")
  {
    ui->goToPreviousMarkButton  ->setEnabled(true);
    ui->goToNextMarkButton      ->setEnabled(true);
  }
  mIntervalsCount--;
  mCurrentGraphsArea->addOrDeleteNewItem(false);
}
void MainPage::on_goToInterval1Button_clicked()
{
  mCurrentGraphsArea->changeXInterval(first);
}
void MainPage::on_goToInterval2Button_clicked()
{
  mCurrentGraphsArea->changeXInterval(second);
}
void MainPage::on_goToPreviousMarkButton_clicked()
{    
  mCurrentGraphsArea->goToLabel(previous);
  updateLabelCounter();
}
void MainPage::on_goToNextMarkButton_clicked()
{    
  mCurrentGraphsArea->goToLabel(next);
  updateLabelCounter();
}
void MainPage::on_playRecord_clicked()
{
  if (isPlayRecord)
  {
    isPlayRecord = false;
    //ui->playRecord            ->setIcon(QIcon(":/icons/pauseRecord.svg"),QIcon(":/icons/pauseRecord_pressed.svg"));
    ui->intervalButton        ->setEnabled(false);
    ui->goToInterval1Button   ->setEnabled(false);
    ui->goToInterval2Button   ->setEnabled(false);
    ui->goToNextMarkButton    ->setEnabled(false);
    ui->goToPreviousMarkButton->setEnabled(false);
    ui->makeLabelButton       ->setEnabled(false);
    ui->sessionButton         ->setEnabled(false);
//    ui->rewindRecordButton    ->setEnabled(false);
//    ui->speedRecordButton     ->setEnabled(false);
    ui->downloadGraphButton   ->setEnabled(false);
    ui->zoomInterval1Button   ->setEnabled(false);
    ui->zoomInterval2Button   ->setEnabled(false);
    ui->dVInputButton         ->setEnabled(false);
    ui->markPPointButton      ->setEnabled(false);
  }
  else
  {
    isPlayRecord = true;
    //ui->playRecord            ->setIcon(QIcon(":/icons/playRecord.svg"),QIcon(":/icons/playRecord_pressed.svg"));
    ui->intervalButton        ->setEnabled(true);
    ui->goToInterval1Button   ->setEnabled(true);
    ui->goToInterval2Button   ->setEnabled(true);
    ui->goToNextMarkButton    ->setEnabled(true);
    ui->goToPreviousMarkButton->setEnabled(true);
    ui->makeLabelButton       ->setEnabled(true);
    ui->sessionButton         ->setEnabled(true);
//    ui->rewindRecordButton    ->setEnabled(true);
//    ui->speedRecordButton     ->setEnabled(true);
    ui->dVInputButton         ->setEnabled(true);
    ui->markPPointButton      ->setEnabled(true);
    ui->downloadGraphButton   ->setEnabled(true);
  }
  emit(playBtnPressed());
}
void MainPage::on_rewindRecordButton_clicked()
{
  mCurrentGraphsArea->mRecordedGraph->xAxis->setRange(0, mCurrentGraphsArea->mRecordedGraph->xAxis->range().size());
}
void MainPage::on_downloadGraphButton_clicked()
{
  isDownloadGraph = true;
  //mCurrentGraphsArea->mRecordedGraph->clearItems();
  //mCurrentGraphsArea->mRecordedGraph->clearGraphs();
  //    _mSPIData temp;
  //    QStringList t = tempArrTime.split(" ");
  //    QStringList p = tempArrPressure.split(" ");

  mTestData.setFileName("/media/testData.txt");

  //    mTestData.open(QIODevice::WriteOnly);
  //    for (int i=0; i < t.size(); i++)
  //    {
  //        temp.data = (uint16_t)p[i].toFloat();
  //        temp.timeStamp = t[i].toUInt();
  //        qDebug() <<t.count()<< temp.data << temp.timeStamp;
  //        mTestData.write((char*)&temp, sizeof(temp));
  //    }
  //    mTestData.close();
  mCurrentGraphsArea->mRecordedGraph->addDataOnGraphic();
  //mCurrentGraphsArea->mRecordedGraph->downloadData(&temp);//доделать
}


void MainPage::on_speedRecordButton_clicked()
{
  iconCount++;
  switch (iconCount % 3)
  {
    case 0: //normal
    {
      currSpeed = speed::SpeedX1;
      ui->speedRecordButton->setIcon(QIcon(":/icons/speedX1.svg"),QIcon(":/icons/speedX1_pressed.svg"));
      break;
    }
    case 1: //x2
    {
      currSpeed = speed::SpeedX2;
      ui->speedRecordButton->setIcon(QIcon(":/icons/speedX2.svg"),QIcon(":/icons/speedX2_pressed.svg"));
      break;
    }
    case 2: //x4
    {
      currSpeed = speed::SpeedX2;
      ui->speedRecordButton->setIcon(QIcon(":/icons/speedX4.svg"),QIcon(":/icons/speedX4_pressed.svg"));
      break;
    }
    default : break;
  }
}

void MainPage::setAverage(uint16_t currAverage)
{
  ui->averageValue->setText(QString::number(currAverage));
  setAveragePointerPos(currAverage);
}
void MainPage::on_zoomInterval1Button_clicked()
{
  mCurrentIntervalNum = 1;
  mCurrentGraphsArea->setMarksOnInterval();
  mCurrentGraphsArea->changeGraph(2); // 1 интервал

  ui->funcFirstButton       ->show();
  ui->funcSecondButton      ->show();
  //ui->funcThirdButton       ->show();
  ui->goBackToGraphButton   ->show();
  ui->intervalButton        ->hide();
  ui->goToInterval1Button   ->hide();
  ui->goToNextMarkButton    ->hide();
  ui->goToPreviousMarkButton->hide();
  ui->makeLabelButton       ->hide();
  ui->sessionButton         ->hide();
//  ui->rewindRecordButton    ->hide();
//  ui->speedRecordButton     ->hide();
  ui->zoomInterval1Button   ->hide();
  //ui->playRecord            ->hide();
  ui->labelsNavigation      ->hide();
  ui->downloadGraphButton   ->hide();
  ui->dVInputButton         ->hide();
  ui->markPPointButton      ->hide();
  if (mIntervalsCount == 4)
  {
    ui->goToInterval2Button->hide();
    ui->zoomInterval2Button->hide();
    ui->mInfoInterval2->hide();
  }
}
void MainPage::on_zoomInterval2Button_clicked()
{    
  mCurrentIntervalNum = 2;
  mCurrentGraphsArea->setMarksOnInterval();
  mCurrentGraphsArea->changeGraph(3); // 2 интервал

  ui->funcFirstButton       ->show();
  ui->funcSecondButton      ->show();
  //ui->funcThirdButton       ->show();
  ui->mInfoInterval2        ->show();
  ui->goBackToGraphButton   ->show();
  ui->mInfoInterval1        ->hide();
  ui->intervalButton        ->hide();
  ui->goToInterval1Button   ->hide();
  ui->goToNextMarkButton    ->hide();
  ui->goToPreviousMarkButton->hide();
  ui->makeLabelButton       ->hide();
  ui->sessionButton         ->hide();
//  ui->rewindRecordButton    ->hide();
//  ui->speedRecordButton     ->hide();
  ui->zoomInterval1Button   ->hide();
//  ui->playRecord            ->hide();
  ui->labelsNavigation      ->hide();
  ui->goToInterval2Button   ->hide();
  ui->zoomInterval2Button   ->hide();
  ui->downloadGraphButton   ->hide();
  ui->dVInputButton         ->hide();
  ui->markPPointButton      ->hide();
}
void MainPage::on_goBackToGraphButton_clicked()
{
  mCurrentIntervalNum = 0;
  mCurrentGraphsArea        ->changeGraph(1);
  ui->goBackToGraphButton   ->hide();
  ui->funcFirstButton       ->hide();
  ui->funcSecondButton      ->hide();
  //ui->funcThirdButton       ->hide();
  ui->goToInterval1Button   ->show();
  ui->goToNextMarkButton    ->show();
  ui->goToPreviousMarkButton->show();
  ui->makeLabelButton       ->show();
  ui->sessionButton         ->show();
//  ui->rewindRecordButton    ->show();
//  ui->speedRecordButton     ->show();
  ui->zoomInterval1Button   ->show();
//  ui->playRecord            ->show();
  ui->labelsNavigation      ->show();
  ui->mInfoInterval1        ->show();
  ui->downloadGraphButton   ->show();
  ui->dVInputButton         ->show();
  ui->markPPointButton      ->show();
  if (mIntervalsCount == 4)
  {
    ui->goToInterval2Button ->show();
    ui->zoomInterval2Button ->show();
    ui->mInfoInterval2      ->show();
  }
  else
  {
    ui->intervalButton->show();
  }
}



void MainPage::on_dVInputButton_clicked()
{
    emit changePage(mVolumeInputPage);
}

void MainPage::on_funcFirstButton_clicked()
{
    emit changePage(mParamInputPage);
    //mCurrentGraphsArea->mFirstInterval->averagePlot();
    //mCurrentGraphsArea->replotIntervalGraph();
}


void MainPage::on_markPPointButton_clicked()
{
    mCurrentGraphsArea->changeGraph(4);
    QList <QAbstractButton*> btnList = this->findChildren<QAbstractButton*>();
    int N = btnList.count();
    for (int i=0; i<N; i++)
    {
        btnList[i]->hide();
    }
    ui->sessionButton->show();
    ui->labelsNavigation->hide();
    ui->mInfoInterval1->hide();
    ui->mInfoInterval2->hide();
    mCurrentGraphsArea->calcCompliance();

}

